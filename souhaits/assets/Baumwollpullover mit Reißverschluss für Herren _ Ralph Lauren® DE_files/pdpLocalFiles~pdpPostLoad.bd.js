(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{198:function(t,e,i){"use strict";const a=i(43);t.exports={handleAddToWaitListBtnEvent:function(t){const e=i(6);var a;(t=t&&t.length?t:$(document)).off("click","#add-to-waitlist, #add-to-waitlisttowel").on("click","#add-to-waitlist, #add-to-waitlisttowel",(function(i){i.preventDefault(),a&&a.abort();var n,s,d,l,o,r,c,p,f,m,u,h=$(this),v=h.closest("form"),g=t.is(".enhanced-pdp-main"),w=t.find("div.enhanced-pdp-main.enhanced-sample").length>0;if(!v.valid()){h.prop("disabled",!0);var b=t.find(".pdp-notify-me-input"),y=b.find("input.email");return t.hasClass("js-pdp-quick-shop")&&(v.valid()?(y.addClass("has-success").removeClass("error"),b.removeClass("error-state")):(y.removeClass("has-success").addClass("error"),b.addClass("error-state"))),!1}var k=h.hasClass("add-to-waitlisttowel");if($(".product-set-list:not('.pdp-page')").length>0?(m=h.closest(".product-set-item").attr("id"),l=(u=$("#"+m)).find(".product-col-1 img").attr("src")):(u=v.closest(".pdp-right-col"),l=v.closest(".pdp-top-cont").find(".swiper-zoom-container img").data("img"),w&&(l=(u=v.closest(".product-container-wrapper-sample")).find(".sample-image").data("original"))),k){t.find("#add-to-waitlisttowel").removeClass("active"),h.addClass("active");var C=h.closest(".towel-waitlist").closest("li").find(".inventoryPDP");n=C.find('input[name="PriceProduct"]').val(),c=C.find('input[name="colorSelected"]').val(),p=C.find('input[name="sizeSelected"]').val(),f=C.find('input[name="secondarysizeSelected"]').val(),r=C.find('input[name="waitListProdId"]').val()}else{if(!g&&!w){var x=t.find("ul.primarysize li.selected"),j=u.find(x);if(j&&0==j.length)return u.find(".pdpNotifyEmailInput .pdp-error-msg").text(Resources.SELECT_SIZE),h.prop("disabled",!0),!1}n=h.data("pricevalue"),p=u.find('input[name="sizeSelected"]').val(),f=null!=(f=u.find("ul.secondarysize > li.selected").find("a").attr("data-selected"))?f:"",r=u.find('input[name="waitListProdId"]').val(),c=u.find(".price-type").length>0?u.find("ul.colorname > div.price-type > li.selected").find("a").attr("data-selected"):0==u.find("ul.colorname").length&&u.find(".upholstery").length?u.find(".upholstery li.selected").find("a").attr("data-selected"):0==u.find("ul.colorname").length&&u.find(".finish").length?u.find(".finish li.selected").find("a").attr("data-selected"):u.find('input[name="colorSelected"]').val()}s=u.find('input[name="waitListProdName"]').val(),d=u.find('input[name="waitListProdBrand"]').val(),o=e.appendParamsToUrl(Urls.getProductUrl,{pid:r});var P=u.find('.email-input.pdpNotifyEmailInput input[name*="_waitlistemail_email"]').val(),_=u.find('.email-input.pdpNotifyEmailInput input[name*="_waitlistemail_addtoemaillist_index_0"]').prop("checked"),S=e.appendParamsToUrl(Urls.triggerMailForWaitListItem,{prodname:s,brandname:d,productprice:n,productimage:l,producturl:o,productstyleid:r,productcolor:c,productsize:p,sizeSltdSecondry:f,mymail:P,addtoemaillist:!!_});a=$.ajax({url:S,success:function(t){var e=t;if(e){var i=JSON.parse(e);$('input[name="existingMail"]').val(i.sessionVal),1==i.added&&($(".email-input",v).addClass("hide"),v.find(".pdp-notify-me-message").hide(),$(".notify-me-success-block",v).removeClass("hide"),$(".quickShop-dialog").is(":visible")&&$(".quickshop-back-trigger").hide(),document.dispatchEvent(new CustomEvent("waitlistFormUpdated",{detail:t})))}}})})),t.closest("#wrapper").off("click",".js-similar-items-btn").on("click",".js-similar-items-btn",(function(t){t.preventDefault(),t.target.blur();var e=$(".category-link-wrapper").length?$(".category-link-wrapper").outerHeight():0;$("html, body").stop().animate({scrollTop:$(".js-similaritems").offset().top-e},500)})),t.off("click",".js-pdp-notify-footnote").on("click",".js-pdp-notify-footnote",(function(t){t.preventDefault(),window.open($(t.target).attr("href"),"_blank")}))},validateFormOnEmailUpdate:function(t){(t=t&&t.length?t:$(document)).off("input",".pdp-notify-me-form-container input.email").on("input",".pdp-notify-me-form-container input.email",a((function(){const e=$(this).closest("form"),i=$("#add-to-waitlist");e.length&&i.length&&i.prop("disabled",!e.valid());var a=t.find(".pdp-notify-me-input"),n=a.find("input.email");t.hasClass("js-pdp-quick-shop")&&(e.valid()?(n.addClass("has-success").removeClass("error"),a.removeClass("error-state")):(n.removeClass("has-success").addClass("error"),a.addClass("error-state")))}),500))},notifyMeCustomCheckbox:function(t){(t=t&&t.length?t:$(document)).off("click",".js-pdp-notify-me-checkbox-label-text").on("click",".js-pdp-notify-me-checkbox-label-text",(function(){$(this).closest(".js-pdp-notify-me-subscribe").find(".input-checkbox").trigger("click")}))},enableValidPdpButton:function(t){const e=(t=t&&t.length?t:$(document)).find(".atc-available");e.length&&e.is(":disabled")&&e.removeAttr("disabled")},updateNotifyMeCheckboxID:function(t){(t=t&&t.length?t:$(document)).find(".js-pdp-notify-me-subscribe").each((function(t){const e=$(this).find(".input-checkbox");var i=e.attr("id");if(-1===e.attr("id").indexOf("_index_")){var a=i+"_index_"+t;this.dataset.control=a,e.attr("id",a),e.attr("name",a),e.siblings("label").attr("for",a)}}))}}}}]);
//# sourceMappingURL=pdpLocalFiles~pdpPostLoad.bd.js.map