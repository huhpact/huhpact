function initSmoothScroll(){if("undefined"!=typeof Lenis){const e=new Lenis({duration:1.2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1,smoothTouch:!1,touchMultiplier:2,infinite:!1});requestAnimationFrame((function t(o){e.raf(o),requestAnimationFrame(t)})),document.querySelectorAll('a[href^="#"]').forEach((t=>{t.addEventListener("click",(function(t){const o=this.getAttribute("href");if("#"===o)return;t.preventDefault();const n=document.querySelector(o);n&&e.scrollTo(n,{offset:-100,duration:1.5})}))}))}}function initProcessScrollJacking(){const e=document.querySelectorAll(".process-step");if(0===e.length)return;let t=-1,o=!1;function n(){const o=document.querySelector(".process-section");if(!o)return;const n=o.getBoundingClientRect(),r=Math.max(0,Math.min(1,-n.top/(n.height-window.innerHeight))),i=Math.floor(r*e.length);if(i!==t&&i>=0&&i<e.length){const o=t;t=i,e.forEach(((e,n)=>{n===t?(e.classList.remove("exiting"),e.classList.add("active")):n===o?(e.classList.remove("active"),e.classList.add("exiting"),setTimeout((()=>{e.classList.remove("exiting")}),600)):e.classList.remove("active","exiting")}))}}window.addEventListener("scroll",(()=>{o||(window.requestAnimationFrame((()=>{n(),o=!1})),o=!0)})),n()}function initNavColorChange(){const e=document.querySelector(".glass-nav");if(!e)return;function t(){const t=document.querySelector(".services-section"),o=document.querySelector(".capabilities-section");if(t||o){const n=t?.getBoundingClientRect(),r=o?.getBoundingClientRect(),i=e.getBoundingClientRect(),s=i.top+i.height/2,a=n&&s>=n.top&&s<=n.bottom,c=r&&s>=r.top&&s<=r.bottom;a||c?e.classList.add("dark-text"):e.classList.remove("dark-text")}}let o;window.addEventListener("scroll",(()=>{clearTimeout(o),o=setTimeout(t,10)})),t()}function initMobileMenu(){const e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-menu");e&&t&&(e.addEventListener("click",(()=>{const o="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!o),e.classList.toggle("active"),t.classList.toggle("active"),document.body.style.overflow=o?"":"hidden"})),document.querySelectorAll(".nav-link").forEach((o=>{o.addEventListener("click",(()=>{t.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false"),document.body.style.overflow=""}))})),document.addEventListener("click",(o=>{e.contains(o.target)||t.contains(o.target)||!t.classList.contains("active")||(t.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false"),document.body.style.overflow="")})))}function initScrollAnimations(){const e=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(t.target.classList.add("animate-in"),e.unobserve(t.target))}))}),{threshold:.15,rootMargin:"0px 0px -100px 0px"});document.querySelectorAll("[data-scroll-animation]").forEach((t=>e.observe(t)))}function initScrollTriggerAnimations(){if("undefined"!=typeof gsap&&"undefined"!=typeof ScrollTrigger){gsap.registerPlugin(ScrollTrigger);document.querySelectorAll(".sticky-image").forEach((e=>{gsap.fromTo(e,{y:100,opacity:0,scale:.9},{y:0,opacity:1,scale:1,duration:1,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 80%",end:"top 30%",scrub:1}})}));document.querySelectorAll(".work-item").forEach(((e,t)=>{gsap.fromTo(e,{y:80,opacity:0},{y:0,opacity:1,duration:.8,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 85%",toggleActions:"play none none none"},delay:.1*t})}));document.querySelectorAll(".service-card").forEach(((e,t)=>{gsap.fromTo(e,{y:60,opacity:0},{y:0,opacity:1,duration:.8,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 85%",toggleActions:"play none none none"},delay:.1*t})}));document.querySelectorAll(".process-step").forEach(((e,t)=>{gsap.fromTo(e,{x:-50,opacity:0},{x:0,opacity:1,duration:.8,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 85%",toggleActions:"play none none none"},delay:.15*t})})),gsap.to(".scroll-line",{scaleY:0,transformOrigin:"top",duration:1.5,ease:"power2.inOut",repeat:-1,yoyo:!0});const e=document.querySelector(".glass-nav");e&&ScrollTrigger.create({start:"top -100",end:99999,toggleClass:{className:"scrolled",targets:e},onUpdate:t=>{-1===t.direction?e.style.transform="translateX(-50%) translateY(0)":1===t.direction&&t.progress>.1&&(e.style.transform="translateX(-50%) translateY(-120%)")}});document.querySelectorAll(".stat-number").forEach((e=>{const t=e.textContent,o=parseInt(t);isNaN(o)||gsap.fromTo(e,{textContent:0},{textContent:o,duration:2,ease:"power1.out",snap:{textContent:1},scrollTrigger:{trigger:e,start:"top 80%",toggleActions:"play none none none"},onUpdate:function(){e.textContent=Math.ceil(this.targets()[0].textContent)+(t.includes("+")?"+":"")+(t.includes("%")?"%":"")}})}));document.querySelectorAll(".work-image").forEach((e=>{gsap.to(e,{yPercent:10,ease:"none",scrollTrigger:{trigger:e.closest(".work-item"),start:"top bottom",end:"bottom top",scrub:1}})}))}}document.addEventListener("DOMContentLoaded",(()=>{initSmoothScroll(),initMobileMenu(),initScrollAnimations(),initScrollTriggerAnimations(),initProcessScrollJacking(),initNavColorChange()})),window.addEventListener("load",(()=>{document.body.classList.add("loaded")})),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").catch((()=>{}))}));const prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)");let resizeTimer;prefersReducedMotion.matches&&(document.documentElement.style.setProperty("--transition-smooth","0.01ms"),document.documentElement.style.setProperty("--transition-fast","0.01ms")),window.addEventListener("resize",(()=>{clearTimeout(resizeTimer),resizeTimer=setTimeout((()=>{"undefined"!=typeof ScrollTrigger&&ScrollTrigger.refresh()}),250)})),document.addEventListener("keydown",(e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")})),document.addEventListener("mousedown",(()=>{document.body.classList.remove("keyboard-navigation")}));const performanceObserver=new PerformanceObserver((e=>{for(const t of e.getEntries())"largest-contentful-paint"===t.entryType&&console.log("LCP:",t.startTime)}));if("undefined"!=typeof PerformanceObserver)try{performanceObserver.observe({entryTypes:["largest-contentful-paint"]})}catch(e){}const lazyImages=document.querySelectorAll('img[loading="lazy"]');if("IntersectionObserver"in window){const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const o=t.target;o.src=o.src,e.unobserve(o)}}))}));lazyImages.forEach((t=>e.observe(t)))}window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.setAttribute("data-theme","dark");