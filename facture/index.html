<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>huh(pact) Invoices</title>
    <link rel="stylesheet" href="/facture/style.css">
    <link rel="stylesheet" href="/facture/invoice.css">
    <link rel="stylesheet" href="/facture/modal.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>huh(pact) Invoices</h1>
            <div class="header-actions">
              
                <button id="previewBtn" class="btn btn-primary">
                    <span class="icon">üëÅÔ∏è</span> Preview
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <button class="nav-item active" data-tab="basic">
                    <span class="icon">üìã</span> Basic Info
                </button>
                <button class="nav-item" data-tab="vendor">
                    <span class="icon">üè¢</span> Vendor Details
                </button>
                <button class="nav-item" data-tab="buyer">
                    <span class="icon">üë§</span> Buyer Details
                </button>
                <button class="nav-item" data-tab="items">
                    <span class="icon">üõí</span> Items & Services
                </button>
                <button class="nav-item" data-tab="payment">
                    <span class="icon">üí≥</span> Payment Terms
                </button>
                <button class="nav-item" data-tab="notes">
                    <span class="icon">üìù</span> Notes & Terms
                </button>
                <button class="nav-item" data-tab="branding">
                    <span class="icon">üé®</span> Branding
                </button>
            </nav>
        </aside>

        <!-- Content Area -->
        <main class="content">
            <!-- Basic Info Tab -->
            <div class="tab-content active" id="basic-tab">
                <div class="form-section">
                    <h2>Invoice Information</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="invoiceNumber">Invoice Number *</label>
                            <input type="text" id="invoiceNumber" placeholder="INV-2024-001" required>
                        </div>
                        <div class="form-group">
                            <label for="invoiceDate">Issue Date *</label>
                            <input type="date" id="invoiceDate" required>
                        </div>
                        <div class="form-group">
                            <label for="dueDate">Due Date</label>
                            <input type="date" id="dueDate">
                        </div>
                        <div class="form-group">
                            <label for="currency">Currency</label>
                            <select id="currency">
                                <option value="USD">USD ($)</option>
                                <option value="EUR">EUR (‚Ç¨)</option>
                                <option value="GBP">GBP (¬£)</option>
                                <option value="JPY">JPY (¬•)</option>
                                <option value="CAD">CAD (C$)</option>
                                <option value="AUD">AUD (A$)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="language">Language</label>
                            <select id="language">
                                <option value="en">English</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                                <option value="it">Italian</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="invoiceType">Invoice Type</label>
                            <select id="invoiceType">
                                <option value="standard">Standard Invoice</option>
                                <option value="proforma">Pro Forma Invoice</option>
                                <option value="credit">Credit Note</option>
                                <option value="debit">Debit Note</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vendor Details Tab -->
            <div class="tab-content" id="vendor-tab">
                <div class="form-section">
                    <h2>Vendor Information</h2>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="vendorCompany">Company Name *</label>
                            <input type="text" id="vendorCompany" placeholder="Your Company Name" required>
                        </div>
                        <div class="form-group">
                            <label for="vendorContact">Contact Person</label>
                            <input type="text" id="vendorContact" placeholder="John Doe">
                        </div>
                        <div class="form-group">
                            <label for="vendorEmail">Email Address</label>
                            <input type="email" id="vendorEmail" placeholder="contact@company.com">
                        </div>
                        <div class="form-group">
                            <label for="vendorPhone">Phone Number</label>
                            <input type="tel" id="vendorPhone" placeholder="+1 (555) 123-4567">
                        </div>
                        <div class="form-group">
                            <label for="vendorWebsite">Website</label>
                            <input type="url" id="vendorWebsite" placeholder="https://company.com">
                        </div>
                        <div class="form-group full-width">
                            <label for="vendorAddress">Address</label>
                            <textarea id="vendorAddress" rows="3" placeholder="123 Business St, Suite 100&#10;City, State 12345&#10;Country"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="vendorVat">VAT/Tax ID</label>
                            <input type="text" id="vendorVat" placeholder="VAT123456789">
                        </div>
                        <div class="form-group">
                            <label for="vendorRegNumber">Registration Number</label>
                            <input type="text" id="vendorRegNumber" placeholder="REG123456">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Buyer Details Tab -->
            <div class="tab-content" id="buyer-tab">
                <div class="form-section">
                    <h2>Buyer Information</h2>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="buyerName">Company/Client Name *</label>
                            <input type="text" id="buyerName" placeholder="Client Company Name" required>
                        </div>
                        <div class="form-group">
                            <label for="buyerContact">Contact Person</label>
                            <input type="text" id="buyerContact" placeholder="Jane Smith">
                        </div>
                        <div class="form-group">
                            <label for="buyerEmail">Email Address</label>
                            <input type="email" id="buyerEmail" placeholder="client@company.com">
                        </div>
                        <div class="form-group">
                            <label for="buyerPhone">Phone Number</label>
                            <input type="tel" id="buyerPhone" placeholder="+1 (555) 987-6543">
                        </div>
                        <div class="form-group">
                            <label for="buyerTaxId">Tax ID</label>
                            <input type="text" id="buyerTaxId" placeholder="TAX987654321">
                        </div>
                        <div class="form-group full-width">
                            <label for="buyerAddress">Billing Address</label>
                            <textarea id="buyerAddress" rows="3" placeholder="456 Client Ave&#10;City, State 67890&#10;Country"></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label for="shippingAddress">Shipping Address (if different)</label>
                            <textarea id="shippingAddress" rows="3" placeholder="Leave blank if same as billing address"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Items Tab -->
            <div class="tab-content" id="items-tab">
                <div class="form-section">
                    <div class="section-header">
                        <h2>Items & Services</h2>
                        <button id="addItemBtn" class="btn btn-primary">
                            <span class="icon">‚ûï</span> Add Item
                        </button>
                    </div>
                    
                    <div class="items-container">
                        <div class="items-header">
                            <div class="item-col-desc">Description</div>
                            <div class="item-col-qty">Qty</div>
                            <div class="item-col-price">Unit Price</div>
                            <div class="item-col-discount">Discount</div>
                            <div class="item-col-tax">Tax</div>
                            <div class="item-col-total">Total</div>
                            <div class="item-col-actions">Actions</div>
                        </div>
                        <div id="itemsList">
                            <!-- Items will be added here dynamically -->
                        </div>
                    </div>

                    <div class="totals-section">
                        <div class="totals-grid">
                            <div class="totals-left">
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="applyDiscount"> Apply Global Discount
                                    </label>
                                    <div id="discountSection" class="discount-controls hidden">
                                        <input type="number" id="globalDiscount" placeholder="0" min="0" max="100" step="0.01">
                                        <select id="discountType">
                                            <option value="percentage">%</option>
                                            <option value="fixed">Fixed Amount</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="applyVat"> Apply VAT/Tax
                                    </label>
                                    <div id="vatSection" class="vat-controls hidden">
                                        <input type="number" id="vatRate" placeholder="0" min="0" max="100" step="0.01">
                                        <span>%</span>
                                    </div>
                                </div>
                            </div>
                            <div class="totals-right">
                                <div class="total-line">
                                    <span>Subtotal:</span>
                                    <span id="subtotalDisplay">$0.00</span>
                                </div>
                                <div class="total-line discount-line hidden">
                                    <span>Discount:</span>
                                    <span id="discountDisplay">-$0.00</span>
                                </div>
                                <div class="total-line vat-line hidden">
                                    <span>VAT/Tax:</span>
                                    <span id="vatDisplay">$0.00</span>
                                </div>
                                <div class="total-line total-final">
                                    <span>Total:</span>
                                    <span id="totalDisplay">$0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payment Terms Tab -->
            <div class="tab-content" id="payment-tab">
                <div class="form-section">
                    <h2>Payment Information</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="paymentTerms">Payment Terms</label>
                            <select id="paymentTerms">
                                <option value="net30">Net 30 days</option>
                                <option value="net15">Net 15 days</option>
                                <option value="net7">Net 7 days</option>
                                <option value="due_on_receipt">Due on receipt</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="paymentMethod">Preferred Payment Method</label>
                            <select id="paymentMethod">
                                <option value="">Select method</option>
                                <option value="bank_transfer">Bank Transfer</option>
                                <option value="check">Check</option>
                                <option value="credit_card">Credit Card</option>
                                <option value="paypal">PayPal</option>
                                <option value="cash">Cash</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label for="bankDetails">Bank Details</label>
                            <textarea id="bankDetails" rows="4" placeholder="Bank Name: Your Bank&#10;Account Name: Your Company&#10;Account Number: 123456789&#10;Routing Number: 987654321&#10;SWIFT/BIC: ABCD1234"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="lateFee">Late Payment Fee (%)</label>
                            <input type="number" id="lateFee" placeholder="0" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="earlyDiscount">Early Payment Discount (%)</label>
                            <input type="number" id="earlyDiscount" placeholder="0" min="0" max="100" step="0.1">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes Tab -->
            <div class="tab-content" id="notes-tab">
                <div class="form-section">
                    <h2>Additional Information</h2>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="invoiceNotes">Invoice Notes</label>
                            <textarea id="invoiceNotes" rows="4" placeholder="Thank you for your business!"></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label for="termsConditions">Terms & Conditions</label>
                            <textarea id="termsConditions" rows="6" placeholder="1. Payment is due within 30 days of invoice date.&#10;2. Late payments may incur additional fees.&#10;3. All work performed is subject to our standard terms of service."></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label for="footerText">Footer Text</label>
                            <textarea id="footerText" rows="2" placeholder="This invoice was generated electronically and is valid without signature."></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Branding Tab -->
            <div class="tab-content" id="branding-tab">
                <div class="form-section">
                    <h2>Branding & Appearance</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="logoUpload">Company Logo</label>
                            <input type="file" id="logoUpload" accept="image/*">
                            <div id="logoPreview" class="logo-preview hidden">
                                <img id="logoImage" src="" alt="Logo Preview">
                                <button type="button" id="removeLogo" class="btn btn-danger btn-small">Remove</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="primaryColor">Primary Color</label>
                            <input type="color" id="primaryColor" value="#2563eb">
                        </div>
                        <div class="form-group">
                            <label for="secondaryColor">Secondary Color</label>
                            <input type="color" id="secondaryColor" value="#64748b">
                        </div>
                        <div class="form-group">
                            <label for="fontFamily">Font Family</label>
                            <select id="fontFamily">
                                <option value="Arial">Arial</option>
                                <option value="Helvetica">Helvetica</option>
                                <option value="Times New Roman">Times New Roman</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Verdana">Verdana</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="invoiceTemplate">Invoice Template</label>
                            <select id="invoiceTemplate">
                                <option value="modern">Modern</option>
                                <option value="classic">Classic</option>
                                <option value="minimal">Minimal</option>
                                <option value="corporate">Corporate</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Action Bar -->
    <div class="action-bar">
        <div class="action-bar-content">
            
            <div class="action-group">
                <button id="generatePdfBtn" class="btn btn-success">
                    <span class="icon">üìÑ</span> Generate PDF
                </button>
               
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Invoice Preview</h3>
                <div class="modal-actions">
                    <button id="zoomOutBtn" class="btn btn-small">üîç-</button>
                    <span id="zoomLevel">100%</span>
                    <button id="zoomInBtn" class="btn btn-small">üîç+</button>
                    <button id="closePreviewBtn" class="btn btn-small">‚úï</button>
                </div>
            </div>
            <div class="modal-body">
                <div id="invoicePreview" class="invoice-preview">
                    <!-- Invoice preview will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Save Template Modal -->
    <div id="saveTemplateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Save Template</h3>
                <button id="closeSaveTemplateBtn" class="btn btn-small">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="templateName">Template Name</label>
                    <input type="text" id="templateName" placeholder="My Template">
                </div>
                <div class="form-group">
                    <label for="templateDescription">Description (optional)</label>
                    <textarea id="templateDescription" rows="3" placeholder="Template description"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelSaveTemplateBtn" class="btn btn-secondary">Cancel</button>
                <button id="confirmSaveTemplateBtn" class="btn btn-primary">Save Template</button>
            </div>
        </div>
    </div>

    <!-- Load Template Modal -->
    <div id="loadTemplateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Load Template</h3>
                <button id="closeLoadTemplateBtn" class="btn btn-small">‚úï</button>
            </div>
            <div class="modal-body">
                <div id="templatesList" class="templates-list">
                    <!-- Templates will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelLoadTemplateBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Hidden file input for import -->
    <input type="file" id="importFileInput" accept=".json" style="display: none;">

    <!-- Scripts -->
    <script src="/facture/app.js"></script>
    <script src="/facture/invoice.js"></script>
    <script src="/facture/pdf.js"></script>
    <script src="/facture/templates.js"></script>
    <script src="/facture/utils.js"></script>
</body>
</html>