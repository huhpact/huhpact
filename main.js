// Internationalization
const translations = {
    fr: {
        "nav.home": "Accueil",
        "nav.about": "À propos",
        "nav.services": "Services",
        "nav.pricing": "Tarifs",
        "nav.gallery": "Portfolio",
        "nav.contact": "Contact",
        "hero.title.line1": "Développement Web",
        "hero.title.line2": "Premium",
        "hero.subtitle": "Design · Hébergement · Maintenance · Marketing · Branding",
        "hero.cta.primary": "Commencer un projet",
        "hero.cta.secondary": "Découvrir nos services",
        "hero.scroll": "Découvrir",
        "about.title": "À propos de huh(pact)",
        "about.subtitle": "Une approche unique du développement web moderne",
        "about.expertise.title": "Expertise Technique",
        "about.expertise.description": "Spécialisé dans le développement web moderne avec une maîtrise complète des technologies front-end et back-end.",
        "about.approach.title": "Approche Personnalisée",
        "about.approach.description": "Chaque projet est unique. Je travaille en étroite collaboration avec mes clients pour créer des solutions sur mesure.",
        "about.performance.title": "Performance Optimale",
        "about.performance.description": "Des solutions rapides, sécurisées et évolutives qui garantissent une expérience utilisateur exceptionnelle.",
        "about.stats.projects": "Projets Réalisés",
        "about.stats.years": "Années d'Expérience",
        "about.stats.satisfaction": "% Satisfaction",
        "services.title": "Nos Services",
        "services.subtitle": "Des solutions complètes pour votre présence en ligne",
        "services.design.title": "Design & UX",
        "services.design.description": "Création d'interfaces modernes et intuitives qui captivent vos utilisateurs",
        "services.development.title": "Développement",
        "services.development.description": "Applications web performantes avec les dernières technologies",
        "services.hosting.title": "Hébergement",
        "services.hosting.description": "Solutions d'hébergement fiables et sécurisées pour votre site",
        "services.maintenance.title": "Maintenance",
        "services.maintenance.description": "Support technique continu et mises à jour régulières",
        "services.marketing.title": "Marketing Digital",
        "services.marketing.description": "Stratégies marketing pour augmenter votre visibilité en ligne",
        "services.branding.title": "Branding",
        "services.branding.description": "Création d'identité visuelle forte et mémorable",
        "pricing.title": "Nos Tarifs",
        "pricing.subtitle": "Choisissez la formule qui correspond à vos besoins",
        "pricing.popular": "Plus Populaire",
        "pricing.starter.title": "Starter",
        "pricing.starter.description": "Parfait pour les petites entreprises",
        "pricing.starter.feature1": "Site vitrine responsive",
        "pricing.starter.feature2": "Optimisation SEO de base",
        "pricing.starter.feature3": "Hébergement 1 an inclus",
        "pricing.starter.feature4": "Support par email",
        "pricing.professional.title": "Professional",
        "pricing.professional.description": "Idéal pour les entreprises en croissance",
        "pricing.professional.feature1": "Application web complète",
        "pricing.professional.feature2": "Design personnalisé",
        "pricing.professional.feature3": "Intégrations avancées",
        "pricing.professional.feature4": "Support prioritaire",
        "pricing.professional.feature5": "Analytics et reporting",
        "pricing.enterprise.title": "Enterprise",
        "pricing.enterprise.description": "Solution complète pour grandes entreprises",
        "pricing.enterprise.feature1": "Plateforme sur mesure",
        "pricing.enterprise.feature2": "Architecture scalable",
        "pricing.enterprise.feature3": "Sécurité renforcée",
        "pricing.enterprise.feature4": "Support 24/7",
        "pricing.enterprise.feature5": "Formation équipe",
        "pricing.cta": "En savoir plus",
        "gallery.title": "Portfolio",
        "gallery.subtitle": "Découvrez quelques-uns de nos projets récents",
        "gallery.project1.title": "Boutique E-commerce",
        "gallery.project1.description": "Plateforme de vente en ligne moderne",
        "gallery.project2.title": "Application SaaS",
        "gallery.project2.description": "Outil de gestion d'entreprise",
        "gallery.project3.title": "Site Corporate",
        "gallery.project3.description": "Présentation d'entreprise élégante",
        "gallery.project4.title": "Portfolio Créatif",
        "gallery.project4.description": "Showcase artistique interactif",
        "vermoegen.title": "Vermögensverwalter",
        "vermoegen.subtitle": "Notre société partenaire spécialisée dans la gestion de patrimoine",
        "vermoegen.description": "Vermögensverwalter offre des services de conseil financier personnalisés et de gestion de patrimoine pour les particuliers et les entreprises. Avec une approche sur mesure et une expertise approfondie des marchés financiers, nous vous accompagnons dans la réalisation de vos objectifs financiers.",
        "vermoegen.feature1": "Gestion de portefeuille",
        "vermoegen.feature2": "Conseil en investissement",
        "vermoegen.feature3": "Planification financière",
        "vermoegen.cta": "Découvrir Vermögensverwalter",
        "contact.title": "Contactez-nous",
        "contact.subtitle": "Prêt à commencer votre projet ? Discutons-en !",
        "contact.email.title": "Email",
        "contact.phone.title": "Téléphone",
        "contact.location.title": "Localisation",
        "contact.location.address": "Paris, France",
        "contact.hours.title": "Horaires",
        "contact.hours.schedule": "Lun-Ven 9h-18h",
        "contact.card.title": "Commençons votre projet",
        "contact.card.description": "Chaque grand projet commence par une simple conversation. N'hésitez pas à nous contacter pour discuter de vos besoins.",
        "contact.cta.email": "Envoyer un email",
        "contact.cta.call": "Appeler maintenant",
        "footer.tagline": "Développement web premium",
        "footer.copyright": "© 2024 huh(pact). Tous droits réservés."
    },
    en: {
        "nav.home": "Home",
        "nav.about": "About",
        "nav.services": "Services",
        "nav.pricing": "Pricing",
        "nav.gallery": "Portfolio",
        "nav.contact": "Contact",
        "hero.title.line1": "Premium Web",
        "hero.title.line2": "Development",
        "hero.subtitle": "Design · Hosting · Maintenance · Marketing · Branding",
        "hero.cta.primary": "Start a project",
        "hero.cta.secondary": "Discover our services",
        "hero.scroll": "Discover",
        "about.title": "About huh(pact)",
        "about.subtitle": "A unique approach to modern web development",
        "about.expertise.title": "Technical Expertise",
        "about.expertise.description": "Specialized in modern web development with complete mastery of front-end and back-end technologies.",
        "about.approach.title": "Personalized Approach",
        "about.approach.description": "Every project is unique. I work closely with my clients to create custom solutions.",
        "about.performance.title": "Optimal Performance",
        "about.performance.description": "Fast, secure and scalable solutions that guarantee an exceptional user experience.",
        "about.stats.projects": "Projects Completed",
        "about.stats.years": "Years of Experience",
        "about.stats.satisfaction": "% Satisfaction",
        "services.title": "Our Services",
        "services.subtitle": "Complete solutions for your online presence",
        "services.design.title": "Design & UX",
        "services.design.description": "Creating modern and intuitive interfaces that captivate your users",
        "services.development.title": "Development",
        "services.development.description": "High-performance web applications with the latest technologies",
        "services.hosting.title": "Hosting",
        "services.hosting.description": "Reliable and secure hosting solutions for your site",
        "services.maintenance.title": "Maintenance",
        "services.maintenance.description": "Continuous technical support and regular updates",
        "services.marketing.title": "Digital Marketing",
        "services.marketing.description": "Marketing strategies to increase your online visibility",
        "services.branding.title": "Branding",
        "services.branding.description": "Creating strong and memorable visual identity",
        "pricing.title": "Our Pricing",
        "pricing.subtitle": "Choose the plan that fits your needs",
        "pricing.popular": "Most Popular",
        "pricing.starter.title": "Starter",
        "pricing.starter.description": "Perfect for small businesses",
        "pricing.starter.feature1": "Responsive showcase website",
        "pricing.starter.feature2": "Basic SEO optimization",
        "pricing.starter.feature3": "1 year hosting included",
        "pricing.starter.feature4": "Email support",
        "pricing.professional.title": "Professional",
        "pricing.professional.description": "Ideal for growing businesses",
        "pricing.professional.feature1": "Complete web application",
        "pricing.professional.feature2": "Custom design",
        "pricing.professional.feature3": "Advanced integrations",
        "pricing.professional.feature4": "Priority support",
        "pricing.professional.feature5": "Analytics and reporting",
        "pricing.enterprise.title": "Enterprise",
        "pricing.enterprise.description": "Complete solution for large enterprises",
        "pricing.enterprise.feature1": "Custom platform",
        "pricing.enterprise.feature2": "Scalable architecture",
        "pricing.enterprise.feature3": "Enhanced security",
        "pricing.enterprise.feature4": "24/7 support",
        "pricing.enterprise.feature5": "Team training",
        "pricing.cta": "Learn more",
        "gallery.title": "Portfolio",
        "gallery.subtitle": "Discover some of our recent projects",
        "gallery.project1.title": "E-commerce Store",
        "gallery.project1.description": "Modern online sales platform",
        "gallery.project2.title": "SaaS Application",
        "gallery.project2.description": "Business management tool",
        "gallery.project3.title": "Corporate Website",
        "gallery.project3.description": "Elegant company presentation",
        "gallery.project4.title": "Creative Portfolio",
        "gallery.project4.description": "Interactive artistic showcase",
        "vermoegen.title": "Vermögensverwalter",
        "vermoegen.subtitle": "Our partner company specialized in wealth management",
        "vermoegen.description": "Vermögensverwalter offers personalized financial advisory services and wealth management for individuals and businesses. With a customized approach and deep expertise in financial markets, we accompany you in achieving your financial goals.",
        "vermoegen.feature1": "Portfolio management",
        "vermoegen.feature2": "Investment advice",
        "vermoegen.feature3": "Financial planning",
        "vermoegen.cta": "Discover Vermögensverwalter",
        "contact.title": "Contact Us",
        "contact.subtitle": "Ready to start your project? Let's talk!",
        "contact.email.title": "Email",
        "contact.phone.title": "Phone",
        "contact.location.title": "Location",
        "contact.location.address": "Paris, France",
        "contact.hours.title": "Hours",
        "contact.hours.schedule": "Mon-Fri 9am-6pm",
        "contact.card.title": "Let's start your project",
        "contact.card.description": "Every great project starts with a simple conversation. Don't hesitate to contact us to discuss your needs.",
        "contact.cta.email": "Send email",
        "contact.cta.call": "Call now",
        "footer.tagline": "Premium web development",
        "footer.copyright": "© 2024 huh(pact). All rights reserved."
    }
};

// Global variables
let currentLanguage = 'fr';
let particles = [];
let animationId;
let mouseX = 0;
let mouseY = 0;

// Initialize application
document.addEventListener('DOMContentLoaded', function() {
    detectLanguage();
    initializeCursor();
    initializeCanvas();
    initializeScrollAnimations();
    initializeCounters();
    initializeNavigation();
    initializeChart();
    initializeMagneticElements();
    translatePage();
    
    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                const offset = 80;
                const elementPosition = target.offsetTop - offset;
                window.scrollTo({
                    top: elementPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
});

// Custom Cursor System
function initializeCursor() {
    const cursor = document.querySelector('.cursor');
    const cursorDot = document.querySelector('.cursor-dot');
    const cursorOutline = document.querySelector('.cursor-outline');
    
    if (window.innerWidth <= 768) {
        cursor.style.display = 'none';
        return;
    }
    
    document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
        
        cursorDot.style.left = e.clientX + 'px';
        cursorDot.style.top = e.clientY + 'px';
        
        cursorOutline.style.left = e.clientX + 'px';
        cursorOutline.style.top = e.clientY + 'px';
    });
    
    // Hover effects
    document.querySelectorAll('a, button, .magnetic-element').forEach(el => {
        el.addEventListener('mouseenter', () => {
            cursor.classList.add('hover');
        });
        
        el.addEventListener('mouseleave', () => {
            cursor.classList.remove('hover');
        });
    });
    
    // Click effects
    document.addEventListener('mousedown', () => {
        cursor.classList.add('click');
    });
    
    document.addEventListener('mouseup', () => {
        cursor.classList.remove('click');
    });
}

// Magnetic Elements System
function initializeMagneticElements() {
    const magneticElements = document.querySelectorAll('.magnetic-element');
    
    magneticElements.forEach(element => {
        element.addEventListener('mousemove', (e) => {
            const rect = element.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;
            
            const strength = 0.3;
            const moveX = x * strength;
            const moveY = y * strength;
            
            element.style.transform = `translate(${moveX}px, ${moveY}px)`;
        });
        
        element.addEventListener('mouseleave', () => {
            element.style.transform = 'translate(0px, 0px)';
        });
    });
}

// Language Detection and Management
function detectLanguage() {
    const browserLang = navigator.language || navigator.userLanguage;
    const langCode = browserLang.split('-')[0];
    
    if (langCode === 'en') {
        currentLanguage = 'en';
        document.documentElement.lang = 'en';
        document.getElementById('langToggle').querySelector('.lang-text').textContent = 'EN';
    } else {
        currentLanguage = 'fr';
        document.documentElement.lang = 'fr';
        document.getElementById('langToggle').querySelector('.lang-text').textContent = 'FR';
    }
}

function toggleLanguage() {
    currentLanguage = currentLanguage === 'fr' ? 'en' : 'fr';
    document.documentElement.lang = currentLanguage;
    document.getElementById('langToggle').querySelector('.lang-text').textContent = currentLanguage.toUpperCase();
    translatePage();
}

function translatePage() {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[currentLanguage][key]) {
            element.textContent = translations[currentLanguage][key];
        }
    });
    
    document.title = currentLanguage === 'fr' 
        ? 'huh(pact) - Développement Web Premium'
        : 'huh(pact) - Premium Web Development';
}

document.getElementById('langToggle').addEventListener('click', toggleLanguage);

// Enhanced Canvas Animation System
function initializeCanvas() {
    const canvas = document.getElementById('heroCanvas');
    const ctx = canvas.getContext('2d');
    
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
    
    // Initialize enhanced particles
    for (let i = 0; i < 150; i++) {
        particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 4 + 1,
            speedX: (Math.random() - 0.5) * 0.8,
            speedY: (Math.random() - 0.5) * 0.8,
            opacity: Math.random() * 0.6 + 0.2,
            hue: Math.random() * 60 + 200, // Blue to purple range
            pulse: Math.random() * Math.PI * 2
        });
    }
    
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Update and draw particles
        particles.forEach((particle, index) => {
            particle.x += particle.speedX;
            particle.y += particle.speedY;
            particle.pulse += 0.02;
            
            // Wrap around screen
            if (particle.x > canvas.width) particle.x = 0;
            if (particle.x < 0) particle.x = canvas.width;
            if (particle.y > canvas.height) particle.y = 0;
            if (particle.y < 0) particle.y = canvas.height;
            
            // Mouse interaction
            const dx = mouseX - particle.x;
            const dy = mouseY - particle.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < 150) {
                const force = (150 - distance) / 150;
                particle.x += dx * force * 0.01;
                particle.y += dy * force * 0.01;
            }
            
            // Draw particle with pulsing effect
            const pulseSize = particle.size + Math.sin(particle.pulse) * 0.5;
            ctx.beginPath();
            ctx.arc(particle.x, particle.y, pulseSize, 0, Math.PI * 2);
            
            const gradient = ctx.createRadialGradient(
                particle.x, particle.y, 0,
                particle.x, particle.y, pulseSize
            );
            gradient.addColorStop(0, `hsla(${particle.hue}, 70%, 60%, ${particle.opacity})`);
            gradient.addColorStop(1, `hsla(${particle.hue}, 70%, 60%, 0)`);
            
            ctx.fillStyle = gradient;
            ctx.fill();
        });
        
        // Draw enhanced connections
        particles.forEach((particle, index) => {
            particles.slice(index + 1).forEach(otherParticle => {
                const dx = particle.x - otherParticle.x;
                const dy = particle.y - otherParticle.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 120) {
                    ctx.beginPath();
                    ctx.moveTo(particle.x, particle.y);
                    ctx.lineTo(otherParticle.x, otherParticle.y);
                    
                    const opacity = 0.15 * (1 - distance / 120);
                    const avgHue = (particle.hue + otherParticle.hue) / 2;
                    ctx.strokeStyle = `hsla(${avgHue}, 70%, 60%, ${opacity})`;
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
            });
        });
        
        animationId = requestAnimationFrame(animate);
    }
    
    animate();
}

// Enhanced Scroll Animations
function initializeScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const delay = entry.target.dataset.delay || 0;
                setTimeout(() => {
                    entry.target.classList.add('visible');
                }, delay * 1000);
            }
        });
    }, observerOptions);
    
    // Observe all animated elements
    document.querySelectorAll('.reveal-text, .slide-in-left, .slide-in-right, .scale-in, .stagger-animation').forEach(el => {
        observer.observe(el);
    });
    
    // Hero text animations
    const heroElements = document.querySelectorAll('.hero .reveal-text');
    heroElements.forEach((el, index) => {
        setTimeout(() => {
            el.classList.add('visible');
        }, (index + 1) * 300);
    });
    
    // Parallax effects
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const rate = scrolled * -0.5;
        
        document.querySelectorAll('.parallax-element').forEach(element => {
            const speed = element.dataset.speed || 0.5;
            const yPos = -(scrolled * speed);
            element.style.transform = `translateY(${yPos}px)`;
        });
        
        // Update navigation progress
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled_percentage = (winScroll / height) * 100;
        document.getElementById('navProgressBar').style.width = scrolled_percentage + '%';
    });
}

// Enhanced Counter Animation
function initializeCounters() {
    const counters = document.querySelectorAll('.stat-number');
    const observerOptions = {
        threshold: 0.7
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const counter = entry.target;
                const target = parseInt(counter.getAttribute('data-count'));
                let current = 0;
                
                const increment = target / 60; // 60 frames for smooth animation
                const timer = setInterval(() => {
                    current += increment;
                    counter.textContent = Math.floor(current);
                    
                    if (current >= target) {
                        counter.textContent = target;
                        clearInterval(timer);
                    }
                }, 16); // ~60fps
                
                observer.unobserve(counter);
            }
        });
    }, observerOptions);
    
    counters.forEach(counter => observer.observe(counter));
}

// Enhanced Navigation Effects
function initializeNavigation() {
    const navbar = document.querySelector('.navbar');
    
    window.addEventListener('scroll', () => {
        if (window.scrollY > 100) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });
}

// Enhanced Chart Animation
function initializeChart() {
    const canvas = document.getElementById('chartCanvas');
    const ctx = canvas.getContext('2d');
    
    canvas.width = 280;
    canvas.height = 280;
    
    const data = [35, 25, 20, 12, 8];
    const colors = [
        'rgba(79, 70, 229, 0.8)',
        'rgba(147, 51, 234, 0.8)',
        'rgba(16, 185, 129, 0.8)',
        'rgba(6, 182, 212, 0.8)',
        'rgba(245, 158, 11, 0.8)'
    ];
    
    let animationProgress = 0;
    
    function drawChart() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 100;
        
        let currentAngle = -Math.PI / 2;
        
        data.forEach((value, index) => {
            const sliceAngle = (value / 100) * 2 * Math.PI * animationProgress;
            
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
            ctx.closePath();
            
            ctx.fillStyle = colors[index];
            ctx.fill();
            
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            currentAngle += (value / 100) * 2 * Math.PI;
        });
        
        // Draw center circle
        ctx.beginPath();
        ctx.arc(centerX, centerY, 40, 0, 2 * Math.PI);
        ctx.fillStyle = 'rgba(10, 10, 10, 0.8)';
        ctx.fill();
    }
    
    function animateChart() {
        if (animationProgress < 1) {
            animationProgress += 0.02;
            drawChart();
            requestAnimationFrame(animateChart);
        }
    }
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                setTimeout(() => {
                    animateChart();
                }, 500);
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });
    
    observer.observe(canvas);
}

// Enhanced Modal System
function openPricingModal(plan) {
    const modalData = {
        starter: {
            title: currentLanguage === 'fr' ? 'Formule Starter' : 'Starter Plan',
            content: currentLanguage === 'fr' 
                ? `<p>La formule Starter est parfaite pour les petites entreprises qui souhaitent établir leur présence en ligne avec un site web professionnel et responsive.</p>
                   <h3>Inclus dans cette formule :</h3>
                   <ul>
                       <li>Conception et développement d'un site vitrine responsive</li>
                       <li>Optimisation SEO de base pour améliorer votre visibilité</li>
                       <li>Hébergement sécurisé pendant 1 an</li>
                       <li>Support technique par email</li>
                       <li>Formation à la gestion de contenu</li>
                       <li>Certificat SSL inclus</li>
                       <li>Intégration Google Analytics</li>
                   </ul>
                   <p><strong>Délai de livraison :</strong> 2-3 semaines</p>
                   <p><strong>Prix :</strong> 999€ TTC</p>`
                : `<p>The Starter plan is perfect for small businesses looking to establish their online presence with a professional and responsive website.</p>
                   <h3>Included in this plan:</h3>
                   <ul>
                       <li>Design and development of a responsive showcase website</li>
                       <li>Basic SEO optimization to improve your visibility</li>
                       <li>Secure hosting for 1 year</li>
                       <li>Technical support via email</li>
                       <li>Content management training</li>
                       <li>SSL certificate included</li>
                       <li>Google Analytics integration</li>
                   </ul>
                   <p><strong>Delivery time:</strong> 2-3 weeks</p>
                   <p><strong>Price:</strong> €999 incl. VAT</p>`
        },
        professional: {
            title: currentLanguage === 'fr' ? 'Formule Professional' : 'Professional Plan',
            content: currentLanguage === 'fr' 
                ? `<p>La formule Professional est idéale pour les entreprises en croissance qui ont besoin d'une solution web complète et personnalisée.</p>
                   <h3>Inclus dans cette formule :</h3>
                   <ul>
                       <li>Application web complète avec fonctionnalités avancées</li>
                       <li>Design personnalisé et unique</li>
                       <li>Intégrations avec vos outils existants (CRM, ERP, etc.)</li>
                       <li>Optimisation SEO avancée</li>
                       <li>Support prioritaire par téléphone et email</li>
                       <li>Analytics et reporting détaillés</li>
                       <li>Maintenance et mises à jour incluses (6 mois)</li>
                       <li>Formation complète de votre équipe</li>
                   </ul>
                   <p><strong>Délai de livraison :</strong> 4-6 semaines</p>
                   <p><strong>Prix :</strong> 2499€ TTC</p>`
                : `<p>The Professional plan is ideal for growing businesses that need a complete and customized web solution.</p>
                   <h3>Included in this plan:</h3>
                   <ul>
                       <li>Complete web application with advanced features</li>
                       <li>Custom and unique design</li>
                       <li>Integrations with your existing tools (CRM, ERP, etc.)</li>
                       <li>Advanced SEO optimization</li>
                       <li>Priority support by phone and email</li>
                       <li>Detailed analytics and reporting</li>
                       <li>Maintenance and updates included (6 months)</li>
                       <li>Complete team training</li>
                   </ul>
                   <p><strong>Delivery time:</strong> 4-6 weeks</p>
                   <p><strong>Price:</strong> €2499 incl. VAT</p>`
        },
        enterprise: {
            title: currentLanguage === 'fr' ? 'Formule Enterprise' : 'Enterprise Plan',
            content: currentLanguage === 'fr' 
                ? `<p>La formule Enterprise offre une solution complète sur mesure pour les grandes entreprises avec des besoins spécifiques.</p>
                   <h3>Inclus dans cette formule :</h3>
                   <ul>
                       <li>Plateforme web entièrement personnalisée</li>
                       <li>Architecture scalable et haute performance</li>
                       <li>Sécurité renforcée et conformité RGPD</li>
                       <li>Intégrations complexes et API personnalisées</li>
                       <li>Support technique 24/7</li>
                       <li>Formation complète de votre équipe</li>
                       <li>Consultation stratégique incluse</li>
                       <li>Maintenance premium (12 mois)</li>
                       <li>Tests de charge et optimisation</li>
                   </ul>
                   <p><strong>Délai de livraison :</strong> 8-12 semaines</p>
                   <p><strong>Prix :</strong> 4999€ TTC</p>`
                : `<p>The Enterprise plan offers a complete custom solution for large companies with specific needs.</p>
                   <h3>Included in this plan:</h3>
                   <ul>
                       <li>Fully customized web platform</li>
                       <li>Scalable and high-performance architecture</li>
                       <li>Enhanced security and GDPR compliance</li>
                       <li>Complex integrations and custom APIs</li>
                       <li>24/7 technical support</li>
                       <li>Complete team training</li>
                       <li>Strategic consultation included</li>
                       <li>Premium maintenance (12 months)</li>
                       <li>Load testing and optimization</li>
                   </ul>
                   <p><strong>Delivery time:</strong> 8-12 weeks</p>
                   <p><strong>Price:</strong> €4999 incl. VAT</p>`
        }
    };
    
    const data = modalData[plan];
    const modalBody = document.getElementById('modalBody');
    modalBody.innerHTML = `
        <div class="modal-body">
            <h2>${data.title}</h2>
            ${data.content}
            <div class="modal-buttons">
                <button class="btn btn-primary magnetic-element" onclick="orderPlan('${plan}')">
                    ${currentLanguage === 'fr' ? 'Commander maintenant' : 'Order now'}
                </button>
                <button class="btn btn-secondary magnetic-element" onclick="closeModal()">
                    ${currentLanguage === 'fr' ? 'Fermer' : 'Close'}
                </button>
            </div>
        </div>
    `;
    
    document.getElementById('modalOverlay').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function openGalleryModal(project) {
    const galleryData = {
        project1: {
            title: currentLanguage === 'fr' ? 'Boutique E-commerce' : 'E-commerce Store',
            description: currentLanguage === 'fr' 
                ? 'Une plateforme e-commerce moderne et performante développée pour une boutique de mode. Intégration complète avec les systèmes de paiement, gestion des stocks en temps réel, et interface administrative avancée.'
                : 'A modern and high-performance e-commerce platform developed for a fashion store. Complete integration with payment systems, real-time inventory management, and advanced administrative interface.',
            image: 'https://images.pexels.com/photos/196644/pexels-photo-196644.jpeg',
            technologies: ['React', 'Node.js', 'MongoDB', 'Stripe', 'Redux'],
            features: currentLanguage === 'fr' 
                ? ['Paiement sécurisé', 'Gestion des stocks', 'Interface admin', 'SEO optimisé']
                : ['Secure payment', 'Inventory management', 'Admin interface', 'SEO optimized'],
            link: 'https://example-ecommerce.com'
        },
        project2: {
            title: currentLanguage === 'fr' ? 'Application SaaS' : 'SaaS Application',
            description: currentLanguage === 'fr' 
                ? 'Outil de gestion d\'entreprise complet avec tableau de bord analytique, gestion des équipes, et système de facturation automatisé. Interface intuitive et fonctionnalités avancées.'
                : 'Complete business management tool with analytical dashboard, team management, and automated billing system. Intuitive interface and advanced features.',
            image: 'https://images.pexels.com/photos/265087/pexels-photo-265087.jpeg',
            technologies: ['Vue.js', 'Laravel', 'PostgreSQL', 'Redis', 'Docker'],
            features: currentLanguage === 'fr' 
                ? ['Dashboard analytique', 'Gestion équipes', 'Facturation auto', 'API REST']
                : ['Analytics dashboard', 'Team management', 'Auto billing', 'REST API'],
            link: 'https://example-saas.com'
        },
        project3: {
            title: currentLanguage === 'fr' ? 'Site Corporate' : 'Corporate Website',
            description: currentLanguage === 'fr' 
                ? 'Site web corporate élégant pour une entreprise de conseil. Design moderne, animations fluides, et optimisation SEO avancée pour une visibilité maximale.'
                : 'Elegant corporate website for a consulting company. Modern design, smooth animations, and advanced SEO optimization for maximum visibility.',
            image: 'https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg',
            technologies: ['HTML5', 'CSS3', 'JavaScript', 'GSAP', 'Webpack'],
            features: currentLanguage === 'fr' 
                ? ['Design responsive', 'Animations GSAP', 'SEO avancé', 'Performance optimisée']
                : ['Responsive design', 'GSAP animations', 'Advanced SEO', 'Optimized performance'],
            link: 'https://example-corporate.com'
        },
        project4: {
            title: currentLanguage === 'fr' ? 'Portfolio Créatif' : 'Creative Portfolio',
            description: currentLanguage === 'fr' 
                ? 'Portfolio interactif pour un artiste digital. Animations créatives, galerie immersive, et expérience utilisateur unique avec des effets visuels impressionnants.'
                : 'Interactive portfolio for a digital artist. Creative animations, immersive gallery, and unique user experience with impressive visual effects.',
            image: 'https://images.pexels.com/photos/590016/pexels-photo-590016.jpg',
            technologies: ['Three.js', 'WebGL', 'GSAP', 'CSS3', 'Canvas'],
            features: currentLanguage === 'fr' 
                ? ['Effets 3D', 'Galerie immersive', 'Animations créatives', 'WebGL']
                : ['3D effects', 'Immersive gallery', 'Creative animations', 'WebGL'],
            link: 'https://example-portfolio.com'
        }
    };
    
    const data = galleryData[project];
    const modalBody = document.getElementById('modalBody');
    modalBody.innerHTML = `
        <div class="modal-body">
            <img src="${data.image}" alt="${data.title}" style="width: 100%; height: 250px; object-fit: cover; border-radius: 20px; margin-bottom: 2rem;">
            <h2>${data.title}</h2>
            <p>${data.description}</p>
            
            <h3>${currentLanguage === 'fr' ? 'Fonctionnalités clés :' : 'Key features:'}</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                ${data.features.map(feature => `
                    <div style="background: rgba(255, 255, 255, 0.1); padding: 1rem; border-radius: 15px; text-align: center;">
                        <span style="color: var(--secondary-color);">${feature}</span>
                    </div>
                `).join('')}
            </div>
            
            <h3>${currentLanguage === 'fr' ? 'Technologies utilisées :' : 'Technologies used:'}</h3>
            <div style="display: flex; gap: 0.8rem; margin-bottom: 3rem; flex-wrap: wrap;">
                ${data.technologies.map(tech => `
                    <span style="background: rgba(79, 70, 229, 0.3); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; font-weight: 500;">${tech}</span>
                `).join('')}
            </div>
            
            <div class="modal-buttons">
                <a href="${data.link}" target="_blank" rel="noopener noreferrer" class="btn btn-primary magnetic-element">
                    ${currentLanguage === 'fr' ? 'Voir le site' : 'View site'}
                </a>
                <button class="btn btn-secondary magnetic-element" onclick="closeModal()">
                    ${currentLanguage === 'fr' ? 'Fermer' : 'Close'}
                </button>
            </div>
        </div>
    `;
    
    document.getElementById('modalOverlay').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    document.getElementById('modalOverlay').classList.remove('active');
    document.body.style.overflow = 'auto';
}

function orderPlan(plan) {
    alert(currentLanguage === 'fr' 
        ? `Merci pour votre intérêt ! Nous vous contacterons bientôt pour discuter de votre projet ${plan}.`
        : `Thank you for your interest! We will contact you soon to discuss your ${plan} project.`);
    closeModal();
}

// Enhanced Performance Monitoring
const observer = new PerformanceObserver((list) => {
    for (const entry of list.getEntries()) {
        if (entry.entryType === 'navigation') {
            console.log('Page Load Time:', entry.loadEventEnd - entry.loadEventStart);
        }
    }
});

observer.observe({ entryTypes: ['navigation'] });

// Cleanup and Error Handling
window.addEventListener('beforeunload', function() {
    if (animationId) {
        cancelAnimationFrame(animationId);
    }
});

window.addEventListener('error', function(e) {
    console.error('JavaScript Error:', e.error);
});

// Close modal on escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeModal();
    }
});

// Prevent right-click context menu on canvas
document.getElementById('heroCanvas').addEventListener('contextmenu', function(e) {
    e.preventDefault();
});

// Smooth scroll polyfill for older browsers
if (!('scrollBehavior' in document.documentElement.style)) {
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/gh/iamdustan/smoothscroll@master/src/smoothscroll.js';
    document.head.appendChild(script);
}